<div class="card card-custom gutter-b">
    <div class="card-header">
        <div class="card-title">
            <h3 class="card-label">
                <i class="icon-2x text-dark-50 flaticon-bag mx-2"></i>

                Editar Proveedor:
                <ng-container *ngIf="isLoading$ | async">
                    <span class="spinner spinner-primary ml-5"></span>
                </ng-container>

                <ng-container *ngIf="title"> '{{ title }}' </ng-container>
            </h3>
        </div>
        <div class="card-toolbar">
        </div>
    </div>

    <!--   <ng-container *ngIf="isLoading$ | async">
        <app-spinner></app-spinner>
    </ng-container>
 -->
    <div class="card-body">
        <!--  <ng-container *ngIf="isLoading$ | async">
            <span class="spinner spinner-primary ml-5"></span>
        </ng-container>
 -->
        <div class="form-group row">
            <div class="col-4">
                <label class="form-label">Tipo Persona: *</label>

                <select name="tipoPersona" class="form-control form-control-solid form-control-lg"
                    [(ngModel)]="tipoPersona">

                    <option value="1">Natural</option>
                    <option value="2">Jurídica</option>

                </select>
            </div>
            <div class="col-4">
                <label class="form-label">Tipo Documento: *</label>

                <select name="tipoDocumento" class="form-control form-control-solid form-control-lg"
                    [(ngModel)]="tipoDocumento">

                    <option value="1">RUC</option>
                    <option value="2">DNI</option>

                </select>
            </div>

            <div class="col-3">
                <label class="form-label">Nro Documento: *</label>
                <input type="text" class="form-control form-control-solid form-control-lg" name="nroDocumento"
                    placeholder="Nro Documento" autocomplete="off" [(ngModel)]="nroDocumento">
            </div>

        </div>

        <div class="form-group row">
            <div class="col-8">
                <label class="form-label">Nombre / Razón Social: *</label>
                <div class="input-group">
                    <input type="text" class="form-control form-control-solid form-control-lg" name="razonSocial"
                        placeholder="Nombre / Razon social" autocomplete="off" [(ngModel)]="razonSocial"
                        #razonSocialControl="ngModel" required />
                    <div class="input-group-append"
                        *ngIf="isButtonClicked || (razonSocialControl.invalid && (razonSocialControl.dirty || razonSocialControl.touched))">
                        <span class="input-group-text" id="basic-addon2">
                            <i class=" fas fa-exclamation-circle text-danger"></i>
                        </span>
                    </div>
                </div>
                <div
                    *ngIf="isButtonClicked || (razonSocialControl.invalid && (razonSocialControl.dirty || razonSocialControl.touched))">
                    <div class="validate-form" *ngIf="razonSocialControl.errors?.required">Nombre / Razón Social es
                        obligatorio.</div>
                    <!-- Puedes agregar otras validaciones según tus necesidades -->
                </div>
            </div>
            <div class="col-3">
                <label class="form-label">Celular: *</label>
                <input type="text" class="form-control form-control-solid form-control-lg" name="celular"
                    placeholder="Celular" autocomplete="off" [(ngModel)]="celular">
            </div>


        </div>

        <div class="form-group row">
            <div class="col-6">
                <label class="form-label">Correo: </label>
                <input type="text" class="form-control form-control-solid form-control-lg" name="correo"
                    placeholder="Correo" autocomplete="off" [(ngModel)]="correo">
            </div>
            <div class="col-5">
                <label class="form-label">Web: </label>
                <input type="text" class="form-control form-control-solid form-control-lg" name="web" placeholder="Web"
                    autocomplete="off" [(ngModel)]="web">
            </div>
            <div class="col-11">
                <label class="form-label">Dirección: </label>
                <input type="text" class="form-control form-control-solid form-control-lg" name="direccion"
                    placeholder="Dirección" autocomplete="off" [(ngModel)]="direccion">
            </div>

        </div>

        <div class="form-group row">
            <div class="col-11">
                <label class="form-label">Actividad Principal: </label>
                <textarea class="form-control" name="actividad" placeholder="Actividad Principal" rows="4"
                    [(ngModel)]="actividad"></textarea>
            </div>

        </div>

        <div class="form-group row">
            <div class="col-11">
                <label class="form-label">Observaciones: </label>
                <textarea class="form-control" name="observaciones" placeholder="Observaciones" rows="4"
                    [(ngModel)]="observaciones"></textarea>
            </div>

        </div>

       
        <div class="form-group row">
            <div class="col-11">

                <div class="mt-5">
                    <ul class="nav nav-tabs nav-bold nav-tabs-line">
                        <li class="nav-item">
                            <a class="nav-link active" data-toggle="tab" href="#kt_tab_pane_1_4">

                                CONTACTOS
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#kt_tab_pane_2_4">

                                GAMA DE PRODUCTOS
                            </a>
                        </li>

                    </ul>
                </div>
                <div class="mt-5">
                    <div class="tab-content">
                        <div class="tab-pane fade show active" id="kt_tab_pane_1_4" role="tabpanel"
                            aria-labelledby="kt_tab_pane_1_4">

                            <div class="accordion accordion-toggle-arrow" id="accordionExample1">

                                <div class="card">
                                    <div class="card-header">
                                        <div class="card-title collapsed" data-toggle="collapse"
                                            data-target="#collapseThree1">
                                            Registrar contacto
                                        </div>
                                    </div>
                                    <div id="collapseThree1" class="collapse" data-parent="#accordionExample1">
                                        <div class="card-body">
                                            <div class="form-group row">
                                                <div class="col-5">
                                                    <label class="form-label">Nombre del contacto: *</label>
                                                    <input type="text"
                                                        class="form-control form-control-solid form-control-lg"
                                                        name="nombreContacto" placeholder="Nombre del contacto"
                                                        autocomplete="off" [(ngModel)]="nombreContacto">
                                                </div>
                                                <div class="col-6">
                                                    <label class="form-label">Correo: *</label>
                                                    <input type="text"
                                                        class="form-control form-control-solid form-control-lg"
                                                        name="correoContacto" placeholder="Correo" autocomplete="off"
                                                        [(ngModel)]="correoContacto">
                                                </div>




                                            </div>
                                            <div class="form-group row">
                                                <div class="col-3">
                                                    <label class="form-label">Tipo Documento: *</label>

                                                    <select name="tipoDocumentoContacto"
                                                        class="form-control form-control-solid form-control-lg"
                                                        [(ngModel)]="tipoDocumentoContacto">

                                                        <option value="1">RUC</option>
                                                        <option value="2">DNI</option>

                                                    </select>
                                                </div>
                                                <div class="col-4">
                                                    <label class="form-label">N° Documento: *</label>
                                                    <input type="text"
                                                        class="form-control form-control-solid form-control-lg"
                                                        name="nroDocumentoContacto" placeholder="N° Documento"
                                                        autocomplete="off" [(ngModel)]="nroDocumentoContacto">
                                                </div>

                                                <div class="col-3">
                                                    <label class="form-label">Celular: *</label>
                                                    <input type="text"
                                                        class="form-control form-control-solid form-control-lg"
                                                        name="celularContacto" placeholder="Celular" autocomplete="off"
                                                        [(ngModel)]="celularContacto">
                                                </div>

                                                <div class="col-1" style="    align-items: center;
                                                display: flex;
                                                margin-top: 2%;">


                                                    <a onclick="return false" (click)="addContacto()"
                                                        class="btn btn-success font-weight-bold mr-2 ">
                                                        <i class=" flaticon2-add"></i>
                                                    </a>

                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group row mt-5">
                                <div class="col-12">
                                    <table class="table table-striped table-bordered">
                                        <thead>
                                            <tr>
                                                <th scope="col">#</th>
                                                <th scope="col">Nombre Completo</th>
                                                <th scope="col">Celular</th>
                                                <th scope="col">Correo</th>
                                                <th scope="col">Tipo Documento</th>
                                                <th scope="col">Nro Documento</th>
                                                <th scope="col"></th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                            <ng-container *ngFor="let contacto of listContacto; let i = index">
                                                <tr>
                                                    <th scope="row">{{ i + 1 }}</th>
                                                    <td>{{ contacto.nombre }}</td>
                                                    <td>{{ contacto.celular }}</td>
                                                    <td>{{ contacto.correo }}</td>
                                                    <td>
                                                        <span *ngIf="contacto.tipoDocumento === 1">RUC</span>
                                                        <span *ngIf="contacto.tipoDocumento === 2">DNI</span>
                                                    </td>
                                                    <td>{{ contacto.nroDocumento }}</td>
                                                    <td>
                                                        <a class="btn" (click)="removeContacto(contacto)">
                                                            <i class="flaticon-delete-1 text-danger"></i>
                                                        </a>

                                                    </td>
                                                </tr>
                                            </ng-container>





                                        </tbody>
                                    </table>
                                </div>
                            </div>

                        </div>
                        <div class="tab-pane fade" id="kt_tab_pane_2_4" role="tabpanel"
                            aria-labelledby="kt_tab_pane_2_4">
                            <div class="form-group row mt-5">
                                <div class="col-12">
                                    <table class="table table-striped table-bordered">
                                        <thead>
                                            <tr>
                                                <th scope="col">#</th>

                                                <th scope="col">Descripción</th>
                                                <th scope="col">Categoría</th>
                                                <th scope="col">Precio de compra</th>
                                                <th scope="col">Precio de venta</th>
                                                <th scope="col">Editar</th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                            <ng-container *ngFor="let product of productos; let i = index">
                                                <tr>
                                                    <td scope="row">{{ i + 1 }}</td>


                                                    <td>{{ product.title }} </td>
                                                    <td>{{ product.categorie.name }} </td>
                                                    <td>{{ product.price_soles}} </td>
                                                    <td>{{ product.price_soles}} </td>
                                                    <td>
                                                        <a [routerLink]="['/products/edit-product',product.id]" class="btn">
                                                            <i class="flaticon2-pen text-success"></i>
                                                        </a>

                                                    </td>
                                                </tr>
                                            </ng-container>





                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

            </div>

        </div>


        <div class="form-group row">


            <div class="col-6">
                <button [routerLink]="['/proveedores/list-proveedor']" class="btn btn-md btn-danger">Volver</button>
            </div>





            <div class="col-5" style="display: flex;justify-content: right;">
                <div style="    align-items: center;  display: flex; margin-right: 40px;">
                    <ng-container *ngIf="isLoading$ | async">
                        <span class="spinner spinner-primary ml-5"></span>
                    </ng-container>
                </div>
                <button [disabled]="isLoading$ | async" class="btn btn-md btn-success mr-2" (click)="descargar()">Descargar</button>
                <button [disabled]="isLoading$ | async" class="btn btn-md btn-primary" (click)="updateProveedor()">Actualizar</button>
            </div>







        </div>
    </div>
</div>